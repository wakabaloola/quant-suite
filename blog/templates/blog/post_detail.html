<!-- research/templates/research/post_detail.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}{{ post.title }} - research - quantsuite.io{% endblock %}

{% block extra_head %}
<!-- Include MathJax for LaTeX rendering -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Include Prism.js for syntax highlighting -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
{% endblock %}

{% block content %}
<nav aria-label="breadcrumb" class="mt-4">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'blog:post_list' %}">Research</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ post.title }}</li>
    </ol>
</nav>

<!-- Main post content - using full width -->
<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h1 class="h3 mb-0">{{ post.title }}</h1>
        <span class="text-muted">{{ post.created_at|date:"F j, Y" }}</span>
    </div>
    <div class="card-body">
        <!-- Display the markdown content -->
        <div class="research-content">
            {{ post.formatted_markdown }}
        </div>
    </div>
    {% if post.updated_at and post.updated_at != post.created_at %}
    <div class="card-footer text-muted">
        Last updated: {{ post.updated_at|date:"F j, Y" }}
    </div>
    {% endif %}
</div>

<!-- Initialize MathJax and Prism -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // This ensures MathJax processes the content after the page loads
        if (typeof MathJax !== 'undefined') {
            MathJax.typeset();
        }

        // This ensures Prism.js highlights code after the page loads
        if (typeof Prism !== 'undefined') {
            Prism.highlightAll();
        }
    });
</script>
{% endblock %}
